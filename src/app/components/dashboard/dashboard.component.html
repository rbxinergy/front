<mat-toolbar>
   <div class="menu-container">
      <button mat-icon-button aria-label="Menu icon" (click)="toggleMenu()">
         <mat-icon>menu</mat-icon>
      </button>
      <div class="title">
         <h1><a [routerLink]="['configs']">X-RISK</a></h1><span>Backoffice</span>
      </div>
   </div>
   <div class="selector-container">
      <button mat-stroked-button class="selector" [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
         Seleccionar empresa<mat-icon iconPositionEnd>arrow_drop_down</mat-icon>
       </button>
       <mat-menu #menu="matMenu" class="menu">
         @for (client of clients; track client.name) {
            <div class="menu">
               <div class="menu-label">
                  <label for="{{client.name}}" >{{client.name}}</label>
               </div>
               @for (company of client.companies; track company.name) {
                  <table class="menu-table">
                     <tr>
                        <td>
                           <label for="{{company.name}}">{{company.name}}</label>
                        </td>
                        <td align="end">
                           <mat-radio-button id="{{company.name}}" (click)="onCompanySelect(company.name, $event)"></mat-radio-button>
                        </td>
                     </tr>
                  </table>
               }
            </div>
         }
         <mat-checkbox [(ngModel)]="selectByDefault" (click)="$event.stopPropagation()">
            <label for="all">Empresa por defecto.</label>
         </mat-checkbox>
       </mat-menu>
   </div>
   <div class="company-container">
      <div class="company-label">
         {{selectedCompany}}
      </div>
   </div>
   <div class="welcoming-container">
      <div class="welcoming" id="welcoming">
         <div role="img" [attr.aria-label]="name" class="name">{{initials}}</div>
         <div>
            <p>{{"greeting" | translate}}, {{name}}</p> 
         </div>
         <a ariaCurrentWhenActive="page" (click)="logOut()">
            <mat-icon>logout</mat-icon>{{"logout"| translate}}
         </a>
      </div>
   </div>
</mat-toolbar>

<mat-sidenav-container autosize="true">
   <mat-sidenav [ngClass]="!isCollapsed ? 'expanded' : ''" [mode]="isMobile ? 'over' : 'side'" [opened]="isMobile ? 'false' : 'true'">
      <mat-nav-list>
         <a *ngIf="permittedModules.includes('dashboard')" mat-list-item [routerLink]="['configs']" routerLinkActive="active" ariaCurrentWhenActive="page">
            <span class="entry">
               <mat-icon>house</mat-icon>
               <span *ngIf="!isCollapsed">Dashboard</span>
            </span>
         </a>
         <a *ngIf="permittedModules.includes('clients')" mat-list-item [routerLink]="['clients']" routerLinkActive="active" ariaCurrentWhenActive="page">
            <span class="entry">
               <mat-icon class="material-icons">work_outline</mat-icon>
               <span *ngIf="!isCollapsed">{{"clients" | translate}}</span>
            </span>
         </a>
         <a *ngIf="permittedModules.includes('companies')" mat-list-item [routerLink]="['company']" routerLinkActive="active" ariaCurrentWhenActive="page">
            <span class="entry">
               <mat-icon> business </mat-icon>
               <span *ngIf="!isCollapsed">{{"companies" | translate}}</span>
            </span>
         </a>
         <a *ngIf="permittedModules.includes('roles')" mat-list-item [routerLink]="['role-client']" routerLinkActive="active" ariaCurrentWhenActive="page">
            <span class="entry">
               <mat-icon>person</mat-icon>
               <span *ngIf="!isCollapsed">{{"roles" | translate}}</span>
            </span>
         </a>
         <a *ngIf="permittedModules.includes('bulk-upload')" mat-list-item [routerLink]="['bulk-upload']" routerLinkActive="active" ariaCurrentWhenActive="page">
            <span class="entry">
               <mat-icon>cloud_upload</mat-icon>
               <span *ngIf="!isCollapsed">{{"bulk-upload" | translate}}</span>
            </span>
         </a>
         <a *ngIf="permittedModules.includes('contacts')" mat-list-item [routerLink]="['contact-module']" routerLinkActive="active" ariaCurrentWhenActive="page">
            <span class="entry">
               <mat-icon>contacts</mat-icon>
               <span *ngIf="!isCollapsed">{{"contact" | translate}}</span>
            </span>
         </a>
         <a *ngIf="permittedModules.includes('evaluation-module')" mat-list-item [routerLink]="['evaluation-module']" routerLinkActive="active" ariaCurrentWhenActive="page">
            <span class="entry">
               <mat-icon>assignment_add</mat-icon>
               <span *ngIf="!isCollapsed">{{"evaluation" | translate}}</span>
            </span>
         </a>
         <a *ngIf="permittedModules.includes('questionnaires-module')" mat-list-item [routerLink]="['questionnaires-module']" routerLinkActive="active" ariaCurrentWhenActive="page">
            <span class="entry">
               <mat-icon>quizz</mat-icon>
               <span *ngIf="!isCollapsed">{{"questionnaires" | translate}}</span>
            </span>
         </a>
         <a *ngIf="permittedModules.includes('questions-module')" mat-list-item [routerLink]="['questions-module']" routerLinkActive="active" ariaCurrentWhenActive="page">
            <span class="entry">
               <mat-icon>question_mark</mat-icon>
               <span *ngIf="!isCollapsed">{{"questions" | translate}}</span>
            </span>
         </a>
      </mat-nav-list>
   </mat-sidenav>
   <mat-sidenav-content>
      <main>
         <router-outlet></router-outlet>
      </main>
   </mat-sidenav-content>
</mat-sidenav-container>